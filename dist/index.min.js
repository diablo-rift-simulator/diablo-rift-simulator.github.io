!function(){"use strict";let e=0,t=!1,a=0,n=0,o=[],s={1:{"gem/trickshot_gem":{name:"Trickshot Gem",amount:0},"gem/everlasting_torment":{name:"Everlasting Torment",amount:0},"gem/the_black_rose":{name:"The Black Rose",amount:0},"gem/chained_death":{name:"Chained Death",amount:0},"gem/berserkers_eye":{name:"Berserker's Eye",amount:0},"gem/mocking_laughter":{name:"Mocking Laughter",amount:0},"gem/zod_stone":{name:"Zod Stone",amount:0},"gem/caarsens_invigoration":{name:"Caarsen's Invigoration",amount:0},"gem/defiant_soul":{name:"Defiant soul",amount:0},"gem/freedom_and_devotion":{name:"Freedom and Devotion",amount:0},"gem/respite_stone":{name:"Respite Stone",amount:0},"gem/seleds_weakening":{name:"Seled's Weakening",amount:0},"gem/pain_of_subjugation":{name:"Pain of Subjugation",amount:0},"gem/nightmare_wreath":{name:"Nightmare Wreath",amount:0}},2:{"gem/power_and_command":{name:"Power & Command",amount:0},"gem/the_hunger":{name:"The Hunger",amount:0},"gem/bloody_reach":{name:"Bloody Reach",amount:0},"gem/cutthroats_grin":{name:"Cutthroats Grin",amount:0},"gem/lightning_core":{name:"Lighting Core",amount:0},"gem/followers_burden":{name:"Followers Burden",amount:0},"gem/unity_crystal":{name:"Unity Crystal",amount:0},"gem/battleguard":{name:"Battleguard",amount:0}},"2_5":{"gem/bottled_hope":{name:"Bottled Hope",amount:0},"gem/phoenix_ashes":{name:"Phoenix Ashes",amount:0},"gem/bsj":{name:"Blood-Soaked Jade",amount:0},"gem/chip_of_stoned_flesh":{name:"Chip of Stoned Flesh",amount:0},"gem/echoing_shade":{name:"Echoing Shade",amount:0},"gem/howlers_call":{name:"Howlers Call",amount:0},"gem/zwensons_haunting":{name:"Zwenson's Haunting",amount:0},"gem/seeping_bile":{name:"Seeping Bile",amount:0},"gem/blessing_of_the_worthy":{name:"Blessing of the Worthy",amount:0}},"3_5":{"gem/bottled_hope":{name:"Bottled Hope",amount:0},"gem/phoenix_ashes":{name:"Phoenix Ashes",amount:0},"gem/bsj":{name:"Blood-Soaked Jade",amount:0},"gem/chip_of_stoned_flesh":{name:"Chip of Stoned Flesh",amount:0},"gem/echoing_shade":{name:"Echoing Shade",amount:0},"gem/howlers_call":{name:"Howlers Call",amount:0},"gem/zwensons_haunting":{name:"Zwenson's Haunting",amount:0},"gem/seeping_bile":{name:"Seeping Bile",amount:0},"gem/blessing_of_the_worthy":{name:"Blessing of the Worthy",amount:0}},"4_5":{"gem/bottled_hope":{name:"Bottled Hope",amount:0},"gem/phoenix_ashes":{name:"Phoenix Ashes",amount:0},"gem/bsj":{name:"Blood-Soaked Jade",amount:0},"gem/chip_of_stoned_flesh":{name:"Chip of Stoned Flesh",amount:0},"gem/echoing_shade":{name:"Echoing Shade",amount:0},"gem/howlers_call":{name:"Howlers Call",amount:0},"gem/zwensons_haunting":{name:"Zwenson's Haunting",amount:0},"gem/seeping_bile":{name:"Seeping Bile",amount:0},"gem/blessing_of_the_worthy":{name:"Blessing of the Worthy",amount:0}},"5_5":{"gem/bottled_hope":{name:"Bottled Hope",amount:0},"gem/phoenix_ashes":{name:"Phoenix Ashes",amount:0},"gem/bsj":{name:"Blood-Soaked Jade",amount:0},"gem/chip_of_stoned_flesh":{name:"Chip of Stoned Flesh",amount:0},"gem/echoing_shade":{name:"Echoing Shade",amount:0},"gem/howlers_call":{name:"Howlers Call",amount:0},"gem/zwensons_haunting":{name:"Zwenson's Haunting",amount:0},"gem/seeping_bile":{name:"Seeping Bile",amount:0},"gem/blessing_of_the_worthy":{name:"Blessing of the Worthy",amount:0}}},r=0,m={1:0,2:0,"2_5":0,"3_5":0,"4_5":0,"5_5":0},l=[1,2,5],i=[.754,.201,.045],c=[2,3,4,5],g=[.75,.2,.04,.01],u=["gem/trickshot_gem","gem/the_black_rose","gem/everlasting_torment","gem/chained_death","gem/berserkers_eye","gem/mocking_laughter","gem/zod_stone","gem/caarsens_invigoration","gem/defiant_soul","gem/freedom_and_devotion","gem/nightmare_wreath","gem/respite_stone","gem/seleds_weakening","gem/pain_of_subjugation",],d=["gem/power_and_command","gem/the_hunger","gem/bloody_reach","gem/cutthroats_grin","gem/lightning_core","gem/battleguard","gem/followers_burden","gem/unity_crystal",],h=["gem/bottled_hope","gem/phoenix_ashes","gem/bsj","gem/chip_of_stoned_flesh","gem/echoing_shade","gem/howlers_call","gem/zwensons_haunting","gem/seeping_bile","gem/blessing_of_the_worthy",],p=document.querySelectorAll(".door"),f=$("#five-star-count-main"),b=$("#consume-all-gems"),_=$("#money-spent"),w=$(".resonance"),x=$(".gem-power"),k=$("#gem-info-modal");async function y(){for(let a of((e+=25)%125==0&&(t=!0),_.text(e),S(!1),await p.forEach(e=>{let t=$(".boxes",e),a=parseInt(t.css("transitionDuration"));return t.css("transform","translateY(0)"),new Promise(e=>{setTimeout(e,100*a)})}),p))await new Promise(e=>{setTimeout(e,1),$("#stars",$(a).parent()).css("display","grid")})}async function v(){let e=m["5_5"];for(;m["5_5"]===e;)await y()}function S(e=!0){p.forEach(a=>{{let n=a.querySelector(".boxes"),o=n.cloneNode(!1),p=[].concat(u,d,h).sort(()=>.5-Math.random());e&&p.unshift("crest");let b={};o.setAttribute("selected-gem","none"),e||(b=function e(){let a=C(l,i,1e3),n=B(a);t&&(n=2,t=!1);let o="";switch(l[n]){case 1:return $("#one-star-count").text(++m["1"]),o=u[Math.floor(Math.random()*u.length)],s[1][o].amount++,{name:o,rank:1,fiveStarGem:!1};case 2:return $("#two-star-count").text(++m["2"]),o=d[Math.floor(Math.random()*d.length)],s[2][o].amount++,{name:o,rank:2,fiveStarGem:!1};case 5:let r=function e(){let t=C(c,g,100),a=B(t);return c[a]}();switch(o=h[Math.floor(Math.random()*h.length)],s[r+"_5"][o].amount++,r){case 2:$("#two-of-five-star-count").text(++m["2_5"]);break;case 3:$("#three-star-count").text(++m["3_5"]);break;case 4:$("#four-star-count").text(++m["4_5"]);break;case 5:$("#five-star-count").text(++m["5_5"]),f.text(m["5_5"])}return{name:o,rank:r,fiveStarGem:!0}}}(),$("#total-gem-count").text(++r),$("#one-star-percentage").text(H(m["1"])),$("#two-star-percentage").text(H(m["2"])),$("#two-of-five-star-percentage").text(H(m["2_5"])),$("#three-star-percentage").text(H(m["3_5"])),$("#four-star-percentage").text(H(m["4_5"])),$("#five-star-percentage").text(H(m["5_5"])),p.push(b.name),o.setAttribute("selected-gem",b.name));for(let _=p.length-1;_>=0;_--){let w=document.createElement("div");w.classList.add("box"),w.style.width=a.clientWidth+"px",w.style.height=a.clientHeight+"px",w.innerHTML='<img src="assets/'+p[_]+'.webp" alt=""/>',o.appendChild(w)}if(o.style.transitionDuration="1s",o.style.transform=`translateY(-${a.clientHeight*(p.length-1)}px)`,a.replaceChild(o,n),!e){let x=a.parentElement.querySelector("#stars");null!==x&&a.parentElement.removeChild(x),(x=document.createElement("div")).style.position="absolute",x.style.display="none",x.id="stars";let k='<i class="fa-solid fa-star yellow-star"></i>'.repeat(b.rank);b.fiveStarGem&&(k+='<i class="fa-solid fa-star"></i>'.repeat(5-b.rank)),x.innerHTML=k,a.parentElement.appendChild(x)}}})}p.forEach(e=>{$(e).on("click",e=>{let t=$(e.target),a=t.hasClass("door-container")?t:t.parents(".door-container"),n=$(".boxes",a),o=$(".gem-info",a),s=n.attr("selected-gem");if("none"!==s){let r=o.clone();r.show();let m='<img src="assets/additional_info/'+n.attr("selected-gem")+'.jpg" class="modal-gem-info" style="display: block;" alt="">';$(".gem-info-modal-content").html(m),k.modal("show")}})});let C=(e,t,a)=>{let n=[],o=t.reduce((e,t)=>e+t),s=a/o;for(let r=0;r<e.length;++r){let m=s*t[r];for(let l=0;l<m;++l)n.push(r)}return n},B=e=>{let t=Math.floor(e.length*Math.random());return e[t]};function H(e){return(e/r*100).toFixed(2)}function E(e){let t=0;return["2_5","3_5","4_5","5_5"].map(a=>{t+=s[a][e].amount}),t}function j(){$(".gem-upgrade-wrapper").each(e=>{let t=$(".gem-upgrade-wrapper")[e],a=$(".upgrade-gem-btn",t).attr("data-gem-name");if(!a)return;let n=$(".upgrade-gem-btn",t).attr("data-gem-stars"),o=0;o=["2_5","3_5","4_5","5_5"].includes(n)?E(a):s[n][a].amount,P(t,o,99)})}function z(e,t,a){let n=["2_5","3_5","4_5","5_5"];n.includes(a)&&n.map(a=>{if(0!==e){if(e-s[a][t].amount<0){s[a][t].amount=-((e-s[a][t].amount)*1),e=0;return}e-s[a][t].amount>=0&&(e-=s[a][t].amount,s[a][t].amount=0)}})}function A(e){x.text(n-=e)}function F(e,t,a){$(".gem-rank",e).text(a),$(".gem-rank-next",e).text(a+1)}function G(e){$(e.target).addClass("button-pressed")}function W(e){$(e.target).removeClass("button-pressed")}function q(e){for(let t in s[e])if(s[e][t].amount>0)return!0;return!1}function L(){let e="";return q("1")&&(e+='<option value="1">1 Star</option>'),q("2")&&(e+='<option value="2">2 Star</option>'),q("2_5")&&(e+='<option value="2_5">2/5 Star</option>'),q("3_5")&&(e+='<option value="3_5">3/5 Star</option>'),q("4_5")&&(e+='<option value="4_5">4/5 Star</option>'),q("5_5")&&(e+='<option value="5_5">5/5 Star</option>'),e=e?"<option selected>Select Star Rating</option>"+e:"<option selected>Not enough gems</option>"}function P(e,t,a){if(!a){$(".duplicates-wrapper",e).hide();return}if(99===a){$(".duplicates-available",e).text(t);return}$(".duplicates-wrapper",e).html('<span class="duplicates-available">'+t+"</span>/"+a+" Rank 1 duplicates"),$(".duplicates-wrapper",e).show()}function T(){let e="";Object.keys(s).reverse().forEach(t=>{for(let a in s[t]){let n="";switch(t){case"1":n='<i class="fa-solid fa-star yellow-star col"></i>';break;case"2":n='<i class="fa-solid fa-star yellow-star col"></i>'.repeat(2);break;case"2_5":n='<i class="fa-solid fa-star yellow-star col"></i>'.repeat(2)+'<i class="fa-solid fa-star col" style="color: white;"></i>'.repeat(3);break;case"3_5":n='<i class="fa-solid fa-star yellow-star col"></i>'.repeat(3)+'<i class="fa-solid fa-star col" style="color: white;"></i>'.repeat(2);break;case"4_5":n='<i class="fa-solid fa-star yellow-star col"></i>'.repeat(4)+'<i class="fa-solid fa-star col" style="color: white;"></i>'.repeat(1);break;case"5_5":n='<i class="fa-solid fa-star yellow-star col"></i>'.repeat(5)}s[t][a].amount>0&&(e+='<div class="inventory-content"><button data-gem-name="'+a+'" data-gem-stars="'+t+'" type="button" class="btn btn-xs consume-gem-btn" style="color: red; padding: 0; font-size: 14px !important;">Consume</button><img src="assets/gem_upgrade/'+a+'.webp" style="height: 40px; width: 40px; border-radius: 25px; display: inline" alt=""/><span>  '+s[t][a].name+" "+n+'</span><span class="inventory-gem-count"> x'+s[t][a].amount+"</span></div>")}}),$("#inventory-body").html(e)}if(window.matchMedia("(max-width: 1200px)").matches){let D=$("#stats-wrapper");$("#stats-modal-content").append(D.html()),D.remove()}else $("#statistics-tab").remove();$("#spin").on("click",y).on("mousedown",G).on("mouseup",W).on("touchstart",G),$("#auto-spin").on("click",v).on("mousedown",G).on("mouseup",W).on("touchstart",G),$("#paypal-button").on("mousedown",G).on("mouseup",W),$(".upgrade-gem-btn").on("click",function e(t){let o=$(t.target),r=parseInt(o.attr("data-gem-rank")),m=o.attr("data-gem-stars"),l=function e(t,a,o,r){if(r>9)return;let m=$(".gem-power-for-upgrade",t),l,i=["2_5","3_5","4_5","5_5"];switch(l=i.includes(o)?E(a):s[o][a].amount,o){case"1":switch(r){case 1:n>=1&&(A(1),F(t,a,++r,o),m.text(5));break;case 2:n>=5&&(A(5),F(t,a,++r,o),m.text(10));break;case 3:n>=10&&(A(10),F(t,a,++r,o),m.text(15));break;case 4:n>=15&&(A(15),F(t,a,++r,o),m.text(20));break;case 5:n>=20&&(A(20),F(t,a,++r,o),P(t,s[o][a].amount,1),m.text(25));break;case 6:n>=25&&l>=1&&(s[o][a].amount--,A(25),F(t,a,++r,o),m.text(30),P(t,s[o][a].amount,1));break;case 7:n>=30&&l>=1&&(s[o][a].amount--,A(30),F(t,a,++r,o),m.text(40),P(t,s[o][a].amount,1));break;case 8:n>=40&&l>=1&&(s[o][a].amount--,A(40),F(t,a,++r,o),m.text(50),P(t,s[o][a].amount,1));break;case 9:n>=50&&l>=1&&(s[o][a].amount--,A(50),F(t,a,++r,o),$(".gem-upgrade-requirements",t).hide(),$(".upgrade-gem-btn",t).hide(),$(".gem-upgrade-arrow",t).hide(),$(".gem-rank-next",t).hide())}break;case"2":switch(r){case 1:n>=5&&(A(1),m.text(15),F(t,a,++r,o));break;case 2:n>=15&&(A(15),m.text(25),P(t,s[o][a].amount,1),F(t,a,++r,o));break;case 3:l>=1&&n>=25&&(s[o][a].amount--,A(25),F(t,a,++r,o),m.text(20),P(t,s[o][a].amount,2));break;case 4:l>=2&&n>=25&&(s[o][a].amount-=2,A(20),F(t,a,++r,o),P(t,s[o][a].amount,5),m.text(85));break;case 5:l>=5&&n>=85&&(s[o][a].amount-=5,A(85),P(t,s[o][a].amount,5),m.text(85),F(t,a,++r,o));break;case 6:l>=5&&n>=85&&(s[o][a].amount-=5,A(25),m.text(105),P(t,s[o][a].amount,6),F(t,a,++r,o));break;case 7:l>=6&&n>=105&&(s[o][a].amount-=6,A(30),m.text(150),P(t,s[o][a].amount,9),F(t,a,++r,o));break;case 8:l>=9&&n>=150&&(s[o][a].amount-=9,A(40),m.text(195),P(t,s[o][a].amount,12),F(t,a,++r,o));break;case 9:l>=12&&n>=195&&(s[o][a].amount-=12,A(1),F(t,a,++r,o),$(".gem-upgrade-requirements",t).hide(),$(".upgrade-gem-btn",t).hide(),$(".gem-upgrade-arrow",t).hide(),$(".gem-rank-next",t).hide())}break;case"2_5":case"3_5":case"4_5":case"5_5":switch(r){case 1:n>=50&&(A(50),P(t,s[o][a].amount,1),m.text(75),F(t,a,++r,o));break;case 2:l>=1&&n>=75&&(z(1,a,o),A(75),m.text(100),P(t,s[o][a].amount,1),F(t,a,++r,o));break;case 3:l>=1&&n>=100&&(z(1,a,o),A(100),m.text(250),P(t,s[o][a].amount,5),F(t,a,++r,o));break;case 4:l>=5&&n>=250&&(z(5,a,o),A(250),P(t,s[o][a].amount,6),m.text(375),F(t,a,++r,o));break;case 5:l>=6&&n>=375&&(z(6,a,o),A(375),P(t,s[o][a].amount,12),m.text(725),F(t,a,++r,o));break;case 6:l>=12&&n>=725&&(z(12,a,o),A(725),m.text(725),P(t,s[o][a].amount,12),F(t,a,++r,o));break;case 7:l>=12&&n>=725&&(z(12,a,o),A(725),m.text(1075),P(t,s[o][a].amount,18),F(t,a,++r,o));break;case 8:l>=18&&n>=1075&&(z(18,a,o),A(1075),m.text(1075),P(t,s[o][a].amount,18),F(t,a,++r,o));break;case 9:l>=18&&n>=1075&&(z(18,a,o),A(1075),F(t,a,++r,o),$(".gem-upgrade-requirements",t).hide(),$(".upgrade-gem-btn",t).hide(),$(".gem-upgrade-arrow",t).hide(),$(".gem-rank-next",t).hide())}}return P(t,l=i.includes(o)?E(a):s[o][a].amount,99),r}($(o.parent().parent()),o.attr("data-gem-name"),m,r);if(o.attr("data-gem-rank",l),l>r)switch(m){case"1":w.text(a+=15);break;case"2":w.text(a+=30);break;case"2_5":l<4?w.text(a+=80):w.text(a+=90);break;case"3_5":l<3?w.text(a+=80):w.text(a+=90);break;case"4_5":w.text(a+=90);break;case"5_5":w.text(a+=100)}}).on("mousedown",G).on("mouseup",W).on("touchstart",G),$(".gem-select").on("change",function e(t){let n=$(t.target),r=$(n.parent()),m=n.val(),l=$("option:selected",n).text(),i=$(".star-rating-select",r).val();n.css("background-image","none"),$(".gem-icon",r).attr("src","assets/"+m+".webp"),$(".gem-upgrade-wrapper",r).show(),n.attr("disabled","disabled"),$(".upgrade-gem-btn",r).attr("data-gem-name",m),$(".upgrade-gem-btn",r).attr("data-gem-stars",i),$(".star-rating-select",r).remove();let c=$(".gem-power-for-upgrade",r);switch(i){case"1":w.text(a+=15),c.text(1);break;case"2":w.text(a+=30),c.text(5);break;case"2_5":w.text(a+=30),c.text(50);break;case"3_5":w.text(a+=60),c.text(50);break;case"4_5":w.text(a+=90),c.text(50);break;case"5_5":w.text(a+=100),c.text(50)}s[i][m].amount>=1&&s[i][m].amount--,o.push(m),$(".gem-name",r).text(l),$(".gem-name",r).show(),n.remove()}),$(".star-rating-select").on("change",function e(t){let a=$(t.target),n=$(a.parent());switch($(".gem-select",n).html(function e(t){let a="";for(let n in s[t])!o.includes(n)&&s[t][n].amount>0&&(a+='<option value="'+n+'">'+s[t][n].name+"</option>");return"<option selected>Select a Legendary Gem</option>"+a}(a.val())),$(".gem-select",n).prop("disabled",!1),a.val()){case"1":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>');break;case"2":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>'.repeat(2));break;case"2_5":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>'.repeat(2)+'<i class="fa-solid fa-star col" style="color: white;"></i>'.repeat(3));break;case"3_5":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>'.repeat(3)+'<i class="fa-solid fa-star col" style="color: white;"></i>'.repeat(2));break;case"4_5":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>'.repeat(4)+'<i class="fa-solid fa-star col" style="color: white;"></i>');break;case"5_5":$(".col-stars",n).html('<i class="fa-solid fa-star yellow-star col"></i>'.repeat(5))}}),$('img[data-bs-toggle="tab"]').on("shown.bs.tab",function(e){let t=$(e.target);t.css("filter","brightness(200%)"),"#inventory"===t.attr("href")&&T(),"#gem-upgrade"===t.attr("href")&&j(),$(".star-rating-select",$(t.attr("href"))).html(L())}).on("hidden.bs.tab",function(e){let t=$(e.target);t.css("filter","brightness(100%)")}),$(document.body).on("click",function(e){let t=$(e.target);if(t.hasClass("consume-gem-btn")){let a=$(t.parent()),o=t.attr("data-gem-stars"),r=t.attr("data-gem-name"),m;if(m="1"===o?1:"2"===o?4:32,b.prop("checked")?(x.text(n+=m*s[o][r].amount),s[o][r].amount=0):(s[o][r].amount--,x.text(n+=m)),0===s[o][r].amount){a.remove();return}$(".inventory-gem-count",a).text("x"+s[o][r].amount)}}),$(window).on("shown.bs.modal",function(){$(".star-rating-select").html(L()),T(),j()}),$(document).ready(()=>{$("#gem-upgrade-modal").modal({backdrop:"static",keyboard:!1})}),S()}();